# JavaScript中常见的十五种设计模式

在程序设计中有很多实用的设计模式，而其中大部分语言的实现都是基于“类”。

在JavaScript中并没有类这种概念，JS中的函数属于一等对象，在JS中定义一个对象非常简单（var obj = {}），而基于JS中闭包与弱类型等特性，在实现一些设计模式的方式上与众不同。

本文基于《JavaScript设计模式与开发实践》一书，用一些例子总结一下JS常见的设计模式与实现方法。文章略长，自备瓜子板凳~

## 设计原则

#### 单一职责原则（SRP）

一个对象或方法只做一件事情。如果一个方法承担了过多的职责，那么在需求的变迁过程中，需要改写这个方法的可能性就越大。

应该把对象或方法划分成较小的粒度

#### 最少知识原则（LKP）

一个软件实体应当 尽可能少地与其他实体发生相互作用 

应当尽量减少对象之间的交互。如果两个对象之间不必彼此直接通信，那么这两个对象就不要发生直接的 相互联系，可以转交给第三方进行处理

#### 开放-封闭原则（OCP）

软件实体（类、模块、函数）等应该是可以 扩展的，但是不可修改

当需要改变一个程序的功能或者给这个程序增加新功能的时候，可以使用增加代码的方式，尽量避免改动程序的源代码，防止影响原系统的稳定

## 什么是设计模式

````
假设有一个空房间，我们要日复一日地往里 面放一些东西。最简单的办法当然是把这些东西 直接扔进去，但是时间久了，就会发现很难从这 个房子里找到自己想要的东西，要调整某几样东 西的位置也不容易。所以在房间里做一些柜子也 许是个更好的选择，虽然柜子会增加我们的成 本，但它可以在维护阶段为我们带来好处。使用 这些柜子存放东西的规则，或许就是一种模式
````

学习设计模式，有助于写出可复用和可维护性高的程序

设计模式的原则是“找出 程序中变化的地方，并将变化封装起来”，它的关键是意图，而不是结构。

不过要注意，使用不当的话，可能会事倍功半。


## 一、单例模式

使用闭包缓存内部变量，每次调用返回同一个对象

## 二、策略模式

把大量的条件判断语句用策略来表达

## 三、代理模式

访问的对象内部调用其它对象

## 四、迭代器模式

数组、对象的遍历

## 五、发布—订阅模式

即*观察者模式*，简历了对象间一对多的依赖关系，如dom对象上有多个事件监听

## 六、命令模式

定义一些执行特定事情的指令，显示地指定这些方法名

## 七、组合模式

把拥有相同方法的对象组合在一起，统一执行

## 八、模板方法模式

由两部分结构组成，第一部分是抽象父类，第二部分是具体的实现子类，父类分离出公共部分，要求子类重写某些父类的（易变化的）抽象方法

## 九、享元模式

## 十、职责链模式

## 十一、中介者模式

把多个对象中相同的处理方式抽离成公共函数作为中介者，例如改变分数后输出自己的排名

## 十二、装饰者模式

动态地给某个对象添加一些额外的职责，而不会影响从这个类中派生的其他对象，如继承对象后通过prototype添加其它属性/功能

## 十三、状态模式

事物内部状态的改变往往会带来事物的行为改变

## 十四、适配器模式

 数据格式转换

## 十五、外观模式

可以认为是一组函数的集合
